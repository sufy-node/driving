<div class="container">
    <header class="mb-20">
        <h1>Edit User Profile</h1>
        <p>Updating information for <strong><%= targetUser.name %></strong></p>
    </header>

    <section class="card" style="max-width: 700px; margin: 0 auto;">
        <form action="<%= tenantUrl('/users/edit/' + targetUser._id) %>" method="POST">
            <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <label>Full Name</label>
                    <input type="text" name="name" value="<%= targetUser.name %>" required style="width: 100%;">
                </div>
                <div>
                    <label>Email Address</label>
                    <input type="email" name="email" value="<%= targetUser.email %>" required style="width: 100%;">
                </div>
            </div>

            <div style="margin-top: 20px;">
                <label>User Role</label>
                <select name="role" required style="width: 100%;">
                    <option value="TRAINER" <%= targetUser.role === 'TRAINER' ? 'selected' : '' %>>Trainer (Instructor)</option>
                    <option value="CUSTOMER" <%= targetUser.role === 'CUSTOMER' ? 'selected' : '' %>>Student (Customer)</option>
                    <option value="STAFF" <%= targetUser.role === 'STAFF' ? 'selected' : '' %>>Office Staff</option>
                    <option value="COMPANY_ADMIN" <%= targetUser.role === 'COMPANY_ADMIN' ? 'selected' : '' %>>Company Admin</option>
                </select>
            </div>

            <div style="margin-top: 20px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                    <input type="checkbox" name="isActive" <%= targetUser.isActive ? 'checked' : '' %>>
                    <span>Account is Active (User can log in)</span>
                </label>
            </div>

            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button type="submit" class="btn-success" style="flex: 2;">Save Changes</button>
                <a href="<%= tenantUrl('/users') %>" class="btn" style="flex: 1; background: #666;">Cancel</a>
            </div>
        </form>
    </section>

    <section class="card mt-20" style="max-width: 700px; margin: 20px auto; border-left: 5px solid var(--warning-color);">
        <h3>Security Note</h3>
        <p>Changing a user's role may affect their access to specific modules. If you change a user to "Admin", they will have full control over this school's data.</p>
    </section>
</div>